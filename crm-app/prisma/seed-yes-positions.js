const { PrismaClient } = require('@prisma/client')
const prisma = new PrismaClient()

async function main() {
  console.log('ðŸš€ Starting yes positions seed...')

  // Get or create yes employer
  let yesEmployer = await prisma.employer.findFirst({
    where: { name: 'yes' }
  })

  if (!yesEmployer) {
    yesEmployer = await prisma.employer.create({
      data: {
        name: 'yes',
        email: 'jobs@yes.co.il',
        phone: '1-800-239-000',
        website: 'https://www.yes.co.il',
        description: '×—×‘×¨×ª yes - ×¡×¤×§×™×ª ×©×™×¨×•×ª×™ ×˜×œ×•×•×™×–×™×”, ××™× ×˜×¨× ×˜ ×•×ª×§×©×•×¨×ª ×ž×•×‘×™×œ×” ×‘×™×©×¨××œ'
      }
    })
    console.log('âœ… yes Employer created')
  }

  const positions = [
    {
      title: '× ×¦×™×’/×ª ×ž×›×™×¨×•×ª ×˜×œ×¡×œ (×œ×™×“×™× ×—×ž×™×)',
      location: '× ×©×¨',
      description: `×‘×™×¦×•×¢ ×©×™×—×•×ª ×™×•×¦××•×ª/×§×‘×œ×ª ×©×™×—×•×ª × ×›× ×¡×•×ª ×ž×§×”×œ ×œ×§×•×—×•×ª ×¤×•×˜× ×¦×™××œ×™×™× ×©×”×ª×¢× ×™×™×Ÿ ×‘××ª×¨/×”×ª×§×©×¨ ×œ×ž×•×§×“/×”×©××™×¨ ×¤× ×™×” ×‘×¤×™×™×¡×‘×•×§ ×©×œ yes.
×”×ª×¤×§×™×“ ×›×•×œ×œ ×”×¦×’×ª ×™×ª×¨×•× ×•×ª ×”×ž×•×¦×¨/×”×©×™×¨×•×ª ×•×”×ª××ž×ª×• ×œ×¦×•×¨×›×™ ×”×œ×§×•×—, × ×™×”×•×œ ×ª×”×œ×™×š ×”×ž×›×™×¨×” ×ž×§×¦×” ×œ×§×¦×”, ×¢×ž×™×“×” ×‘×™×¢×“×™ ×ž×›×™×¨×” ××™×©×™×™×, ×ª×™×¢×•×“ ×•×“×™×•×•×— ×¢×œ ×¢×¡×§××•×ª ×©× ×¡×’×¨×•.`,
      requirements: `××•×¨×™×™× ×˜×¦×™×” ×ž×›×™×¨×ª×™×ª - ×—×•×‘×”
× ×™×¡×™×•×Ÿ ×‘×ž×•×§×“×™ ×©×™×¨×•×ª/×©×™×ž×•×¨/×ž×›×™×¨×” - ×™×ª×¨×•×Ÿ ×ž×©×ž×¢×•×ª×™
×™×›×•×œ×ª ×¢×‘×•×“×” ×‘×¡×‘×™×‘×” ×ž×ž×•×—×©×‘×ª - ×—×•×‘×”
×”×™×©×’×™×•×ª ×•×ª×—×¨×•×ª×™×•×ª
×›×•×©×¨ ×‘×™×˜×•×™ ×•×™×›×•×œ×ª ×©×›× ×•×¢
×¢×‘×•×“×” ×ª×—×ª ×œ×—×¥
×ž×©×ž×¢×ª ×¢×¦×ž×™×ª ×’×‘×•×”×”
××—×¨×™×•×ª ××™×©×™×ª ×’×‘×•×”×”
××¡×¨×˜×™×‘×™×•×ª
×¡×“×¨ ×•××¨×’×•×Ÿ`,
      salaryRange: '×©×›×¨ ×‘×¡×™×¡ 34.30 â‚ª ×œ×©×¢×” + ×‘×•× ×•×¡ ×ž×ž×•×¦×¢ 2,700 â‚ª ×œ×œ× ×ª×§×¨×•×ª',
      employmentType: '×ž×©×¨×” ×ž×œ××”',
      active: true,
      tags: ['×ž×›×™×¨×•×ª', '×˜×œ×¡×œ', '×ž×•×§×“', '×©×™×—×•×ª ×™×•×¦××•×ª', '× ×©×¨', 'yes', '×œ×™×“×™×']
    },
    {
      title: '× ×¦×™×’/×ª ×ž×•×§×“ ×©×™×¨×•×ª',
      location: '× ×©×¨ / ×‘××¨ ×©×‘×¢',
      description: `×ž×ª×Ÿ ×ž×¢× ×” ×œ×œ×§×•×—×•×ª ×”×—×‘×¨×” ×‘× ×•×©××™× ×©×•× ×™× ×›×’×•×Ÿ: ×”×•×¡×¤×ª ×©×™×¨×•×ª×™× ×œ×—×‘×™×œ×•×ª ×§×™×™×ž×•×ª, ×ž×¢×‘×¨×™ ×“×™×¨×”, ×˜×™×¤×•×œ ×‘×ª×§×œ×•×ª ×¤×©×•×˜×•×ª, ×”×¡×‘×¨ ×ž×™×“×¢ ×¢×œ ×—×©×‘×•× ×™×•×ª, ×•×©×™×ž×•×¨ ×œ×§×•×—×•×ª ×œ× ×ž×¨×•×¦×™× ×ª×•×š ×‘×—×™× ×ª ×”×ž×§×¨×”.
×›×œ ××œ×• ×ª×•×š ×©×ž×™×¨×” ×¢×œ ×¡×˜× ×“×¨×˜ ×©×™×¨×•×ª ×’×‘×•×” ×•×¡×’×™×¨×ª ×ž×¢×’×œ ×”×˜×™×¤×•×œ ×‘×œ×§×•×—.`,
      requirements: `×™×›×•×œ×ª ×¢×‘×•×“×” ×‘×¡×‘×™×‘×” ×ž×ž×•×—×©×‘×ª
×›×•×©×¨ ×‘×™×˜×•×™ ×˜×•×‘
×™×—×¡×™ ×× ×•×©
×¡×‘×œ× ×•×ª ×•××ž×¤×ª×™×”
×™×›×•×œ×ª ×¢×‘×•×“×” ×ª×—×ª ×œ×—×¥
× ×›×•× ×•×ª ×œ×¢×‘×•×“×” ×‘×ž×©×ž×¨×•×ª
××•×¤×¦×™×” ×œ×¢×‘×•×“×” ×”×™×‘×¨×™×“×™×ª ×œ××—×¨ ×ª×§×•×¤×ª ×”×”×¡×ž×›×”`,
      salaryRange: '34.30 â‚ª ×œ×©×¢×” + 3,000 â‚ª ×‘×•× ×•×¡ (×˜×•×•×— ×—×•×“×©×™ 8-9K)',
      employmentType: '×ž×©×¨×” ×ž×œ××”',
      active: true,
      tags: ['×©×™×¨×•×ª ×œ×§×•×—×•×ª', '×ž×•×§×“', '× ×©×¨', '×‘××¨ ×©×‘×¢', 'yes', '×©×™×ž×•×¨', '×¢×‘×•×“×” ×”×™×‘×¨×™×“×™×ª']
    },
    {
      title: '×ª×ž×™×›×” ×˜×›× ×™×ª ×ž×•×§×“',
      location: '× ×©×¨',
      description: `×ž×ª×Ÿ ×ž×¢× ×” ×˜×›× ×™ ××™×›×•×ª×™ ×œ×›×œ×œ ×œ×§×•×—×•×ª ×”×—×‘×¨×”, ×ª×¤×¢×•×œ ×•×¤×ª×¨×•×Ÿ ×ª×§×œ×•×ª ×ž×¨×—×•×§, ×”×“×¨×›×” ×•×œ×™×•×•×™ ×”×œ×§×•×— ×‘×©×œ×˜ ×¨×—×•×§ ×œ×¤×ª×¨×•×Ÿ ×ª×§×œ×•×ª ×‘×›×œ ××‘×™×–×¨×™ ×•×©×™×¨×•×ª×™ ×”×—×‘×¨×”, ×¡×’×™×¨×ª ×ž×¢×’×œ ×˜×™×¤×•×œ ×ž×•×œ ×”×œ×§×•×—×•×ª.
×›×•×œ×œ ×ž×›×™×¨×ª ×ž×•×¦×¨×™× × ×œ×•×•×™× ×œ×œ×§×•×— ×œ×¤×ª×¨×•×Ÿ ×ª×§×œ×•×ª, ×•×ž×ª×Ÿ ×”×ª×›×ª×‘×•×ª ×¢× ×œ×§×•×—×•×ª ×”×—×‘×¨×” ×•×¤×ª×™×¨×ª ×ª×§×œ×•×ª ×‘××ž×¦×¢×•×ª WhatsApp.`,
      requirements: `×™×“×¢ ×˜×›× ×™ - ×—×•×‘×”
×™×›×•×œ×ª ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª
×›×•×©×¨ ×‘×™×˜×•×™ ×•× ×™×¡×•×— ×˜×•×‘ ×‘×›×ª×‘ - ×—×•×‘×” (WhatsApp)
×¡×‘×œ× ×•×ª ×•×”×“×¨×›×”
× ×›×•× ×•×ª ×œ×¢×‘×•×“×” ×‘×ž×©×ž×¨×•×ª (×‘×•×§×¨, ×¦×”×¨×™×, ×¢×¨×‘, ×œ×™×œ×”)
×™×›×•×œ×ª ×¢×‘×•×“×” ×¢×¦×ž××™×ª
×™×—×¡×™ ×× ×•×©`,
      salaryRange: '34.30 â‚ª ×œ×©×¢×” + 3,000 â‚ª ×‘×•× ×•×¡ (×˜×•×•×— ×—×•×“×©×™ 8-9K) + ×ª×©×œ×•× ×ž×•×›×¤×œ ×¢×œ ×œ×™×œ×•×ª/×©×‘×ª×•×ª/×—×’×™×',
      employmentType: '×ž×©×¨×” ×ž×œ××”',
      active: true,
      tags: ['×ª×ž×™×›×” ×˜×›× ×™×ª', '×ž×•×§×“', '×˜×›× ××™', '× ×©×¨', 'yes', '×©×™×¨×•×ª', '×ž×©×ž×¨×•×ª', 'WhatsApp']
    },
    {
      title: '×¡×•×›×Ÿ/×ª ×ž×›×™×¨×•×ª ×©×˜×— ×œ×ž×’×–×¨ ×¢×¡×§×™',
      location: '××–×•×¨ ×”×¦×¤×•×Ÿ',
      description: `×ž×›×™×¨×ª ×ž×•×¦×¨×™ ×•×©×¨×•×ª×™ ×”×—×‘×¨×” ×œ×‘×ª×™ ×¢×¡×§ ×‘×™× ×•× ×™×™× ×•×’×“×•×œ×™×, ××™×ª×•×¨ ×œ×§×•×—×•×ª ×¤×•×˜× ×¦×™××œ×™×™× ×•×ª××•× ×¤×’×™×©×•×ª ×ž×›×™×¨×” ×¢×™×ž× ×‘××•×¤×Ÿ ×¢×¦×ž××™.
×‘×™×¦×•×¢ ×¤×’×™×©×•×ª ×”×ž×›×™×¨×” ×•×ž×•"×ž ×œ×¡×’×™×¨×ª ×”×¢×¡×§××•×ª ×¢× ×‘×ª×™ ×”×¢×¡×§, ××—×¨×™×•×ª ××™×©×™×ª ×•×œ×™×•×•×™ ×ª×”×œ×™×š ×”×¦×˜×¨×¤×•×ª ×”×œ×§×•×— ×œ×—×‘×¨×”, ×”×Ÿ ×ž×‘×—×™× ×” ×ž×›×™×¨×ª×™×ª ×•×”×Ÿ ×ž×‘×—×™× ×” ×©×™×¨×•×ª×™×ª.
×¢×‘×•×“×” ×ž×•×œ ×ž×ž×©×§×™× ×¤× ×™× ×•×—×•×¥ ××¨×’×•× ×™×™× ×¨×‘×™×, ×¢×ž×™×“×” ×‘×™×¢×“×™ ×”×ž×›×™×¨×•×ª.`,
      requirements: `× ×™×¡×™×•×Ÿ ×‘×ž×›×™×¨×•×ª - ×—×•×‘×”
×”×›×¨×•×ª ×¢× ×”×ž×’×–×¨ ×”×¢×¡×§×™ - ×™×ª×¨×•×Ÿ ×ž×©×ž×¢×•×ª×™
×¨×§×¢ ×˜×›× ×™ - ×™×ª×¨×•×Ÿ ×ž×©×ž×¢×•×ª×™
×¨×¦×™× ×•×ª, ×™×¦×™×‘×•×ª ×•×ž×›×•×•× ×•×ª ×œ×˜×•×•×— ××¨×•×š
×“×¨×™×™×‘ ×œ×ž×›×™×¨×•×ª
× ×›×•× ×•×ª ×œ×¢×‘×•×“×ª ×©×˜×— ×ž××•×ž×¦×ª
×¤×¨×•××§×˜×™×‘×™×•×ª - ×™×•×–×ž×” ×‘××™×ª×•×¨ ×œ×§×•×—×•×ª ×¤×•×˜× ×¦×™××œ×™×™× ×•×§×‘×™×¢×ª ×¤×’×™×©×•×ª ×ž×›×™×¨×”
×™×—×¡×™ ×× ×•×© ×ž×¦×•×™×™× ×™×
×™×›×•×œ×ª ×™×¦×™×¨×ª ×©×ª"×¤ ×•×¢×‘×•×“×” ×ž×•×œ ×ž×ž×©×§×™×
×¢×¦×ž××•×ª ×•××—×¨×™×•×ª ××™×©×™×ª
×¢×ž×™×“×” ×‘×ª× ××™ ×œ×—×¥ ×•×¨×™×‘×•×™ ×ž×©×™×ž×•×ª
×™×™×¦×•×’×™×•×ª - ×›×•×©×¨ ×‘×™×˜×•×™ ×’×‘×•×” ×•×”×•×¤×¢×” ×™×™×¦×•×’×™×ª
× ×—×™×©×•×ª, ×ª×¢×•×–×”, ×ª×—×¨×•×ª×™×•×ª, ×”×©×’×™×•×ª, ××¡×¨×˜×™×‘×™×•×ª
×¨×™×©×™×•×Ÿ × ×”×™×’×” - ×—×•×‘×”`,
      salaryRange: '×©×›×¨ ×‘×¡×™×¡ 8,000 â‚ª + ×‘×•× ×•×¡ ×œ×œ× ×ª×§×¨×” + ×¨×›×‘ + ×¡×œ×•×œ×¨×™ + ×˜×‘×œ×˜ + ×ž×—×©×‘ × ×™×™×“ + 10×‘×™×¡',
      employmentType: '×ž×©×¨×” ×ž×œ××”',
      active: true,
      tags: ['×ž×›×™×¨×•×ª ×©×˜×—', '×¢×¡×§×™', 'B2B', '×¦×¤×•×Ÿ', 'yes', '×¡×•×›×Ÿ', '×¨×›×‘ ×¦×ž×•×“', '×¢×¦×ž××™']
    },
    {
      title: '××—×¨××™/×ª ×ª×™×§ ×œ×§×•×— ×¢×¡×§×™',
      location: '×›×¤×¨ ×¡×‘×',
      description: `×ž×ª×Ÿ ×ž×¢× ×” ×˜×œ×¤×•× ×™ ×œ×œ×§×•×—×•×ª ×”×¢×¡×§×™×™× ×©×œ ×”×—×‘×¨×”, ×ž×ª×Ÿ ×©×™×¨×•×ª ×•×ž×›×™×¨×” ×œ×ª×™×§ ×”×œ×§×•×— ×”×¢×¡×§×™, ×ž×™×ž×•×© ×”×¤×•×˜× ×¦×™××œ ×”×¢×¡×§×™ ×©×œ ×”×œ×§×•×— ×‘××ž×¦×¢×•×ª ×”×•×¡×¤×ª ×ž× ×•×™×™×, ×©×™×¨×•×ª×™× ×•×ž×•×¦×¨×™×.
××—×¨×™×•×ª ×ž×¢×¨×›×ª×™×ª ×œ× ×™×”×•×œ ×§×©×¨ ×¢× ×”×œ×§×•×— ×”×¢×¡×§×™ ×œ×˜×•×•×— ×”××¨×•×š, ×©×ž×™×¨×” ×¢×œ ×©×‘×™×¢×•×ª ×¨×¦×•×Ÿ ×’×‘×•×”×” ×•×©×™×ž×•×¨×• ×œ××•×¨×š ×–×ž×Ÿ, ×’×™×•×¡ ×œ×§×•×—×•×ª ×—×“×©×™× ×¤×•×˜× ×¦×™××œ×™×™×.
×ª×¤×§×™×“ ×©×™×¨×•×ª×™ ×¢× ××•×¨×™×™× ×˜×¦×™×” ×ž×›×™×¨×ª×™×ª, ×ž×›×™×¨×” ×©×œ ××¤×¡×™×™×œ×™× ×•×ž×•×¦×¨×™× × ×•×¡×¤×™×.`,
      requirements: `× ×™×¡×™×•×Ÿ ×©×œ ×©× ×” ×œ×¤×—×•×ª ×‘×ª×¤×§×™×“×™ ×©×™×¨×•×ª ×•/××• ×ž×›×™×¨×” - ×™×ª×¨×•×Ÿ ×ž×©×ž×¢×•×ª×™
× ×™×¡×™×•×Ÿ ×§×•×“× ×‘×¢×‘×•×“×” ×¢× ×ž×¢×¨×›×•×ª ×ž×ž×•×—×©×‘×•×ª - ×—×•×‘×”
×©×™×¨×•×ª×™×•×ª
×¢×‘×•×“×” ×ª×—×ª ×œ×—×¥ ×•×ª×™×§×ª×•×§ ×ž×©×™×ž×•×ª ×‘×ž×§×‘×™×œ
××•×¨×™×™× ×˜×¦×™×” ×ž×›×™×¨×ª×™×ª ×•×™×›×•×œ×ª × ×™×”×•×œ ×ž×•"×ž
×™×•×–×ž×” ×•××—×¨×™×•×ª ××™×©×™×ª
×™×¦×™×¨×ª×™×•×ª ×•×™×›×•×œ×ª ×œ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª
×›×•×©×¨ ×‘×™×˜×•×™ ×’×‘×•×”
××¡×¨×˜×™×‘×™×•×ª`,
      salaryRange: '×©×›×¨ ×‘×¡×™×¡ 6,500 â‚ª + ×©×¢×•×ª × ×•×¡×¤×•×ª + ×‘×•× ×•×¡ ×¢×“ 2,500 â‚ª (×ž×ž×•×¦×¢ ×›×•×œ×œ 8,500 â‚ª)',
      employmentType: '×ž×©×¨×” ×ž×œ××”',
      active: true,
      tags: ['×ª×™×§ ×œ×§×•×—×•×ª', '×¢×¡×§×™', 'B2B', '×›×¤×¨ ×¡×‘×', 'yes', '×©×™×¨×•×ª', '×ž×›×™×¨×•×ª', '×ž×•×§×“']
    }
  ]

  console.log(`ðŸ“¦ Creating ${positions.length} yes positions...`)

  for (const posData of positions) {
    const tags = posData.tags
    delete posData.tags

    const position = await prisma.position.create({
      data: {
        ...posData,
        employerId: yesEmployer.id,
        openings: 1,
        priority: 5
      }
    })

    // Create tags
    if (tags && tags.length > 0) {
      for (const tagName of tags) {
        let tag = await prisma.tag.findFirst({
          where: { name: tagName }
        })

        if (!tag) {
          tag = await prisma.tag.create({
            data: {
              name: tagName,
              category: 'skill'
            }
          })
        }

        await prisma.position.update({
          where: { id: position.id },
          data: {
            tags: {
              connect: { id: tag.id }
            }
          }
        })
      }
    }

    console.log(`âœ… Created: ${posData.title} - ${posData.location}`)
  }

  console.log('ðŸŽ‰ yes positions seeded successfully!')
}

main()
  .catch((e) => {
    console.error('âŒ Error seeding yes positions:', e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
